= turbo_frame_tag "messages" do
  .messages-section{ data: { controller: "messages" } }
    %h2 Messages
    
    .messages-list{ data: { messages_target: "list" } }
      - @messages.each do |message|
        .message
          .message-header
            %span.message-user= message.user.name
            %span.message-time= message.created_at.strftime('%H:%M')
          .message-content= message.content
    
    = form_with model: @message, local: false, data: { action: "turbo:submit-end->messages#messageCreated" } do |form|
      .message-form
        = form.text_field :content, placeholder: "Type your message...", data: { messages_target: "input" }, autocomplete: "off"
        = form.submit "Send", class: "btn btn-primary"
