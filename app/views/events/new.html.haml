.event-form-page
  .form-header
    %h1 Create New Event

  .form-container{ data: { controller: "event-type" } }
    = form_for @event, data: { turbo: true, controller: "form", action: "submit->form#submitForm" }, html: { class: "event-form" } do |f|
      - if @event.errors.any?
        .error-messages
          %h3= "#{pluralize(@event.errors.count, "error")} prohibited this event from being saved:"
          %ul
            - @event.errors.full_messages.each do |msg|
              %li= msg

      .form-row
        .field
          = f.label :title, "Event Title"
          = f.text_field :title, required: true, placeholder: "Enter event title", class: "form-input"

      .form-row
        .field
          = f.label :desc, "Description"
          = f.text_area :desc, required: true, placeholder: "Enter event description", class: "form-textarea", rows: 3

      .form-row
        .field
          = f.label :date, "Event Date"
          = f.date_field :date, required: true, class: "form-input"

      .form-row.time-row
        .field.half-width
          = f.label :start_time, "Start Time"
          = f.time_field :start_time, required: true, class: "form-input"

        .field.half-width
          = f.label :end_time, "End Time"
          = f.time_field :end_time, required: true, class: "form-input"

      .form-row
        .field
          = f.label :event_type, "Event Type"
          = f.select :event_type, [['Free', 'free'], ['Paid', 'paid']], { prompt: 'Select event type' }, { required: true, class: "form-input", data: { action: "change->event-type#togglePrice" } }

      .form-row{ id: "price-field", style: "display: none;" }
        .field
          = f.label :price, "Price ($)"
          = f.number_field :price, step: :any, min: 0, placeholder: "0.00", class: "form-input", data: { event_type_target: "price" }

      .form-actions
        = f.submit "Create Event", class: "btn btn-primary", data: { form_target: "submit" }
        = link_to "Cancel", root_path, class: "btn btn-secondary"
